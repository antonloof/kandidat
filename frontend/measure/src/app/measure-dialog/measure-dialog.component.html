<mat-card>
  <mat-card-content>
    <mat-card-header>
      <mat-card-title>
        <h2>New Measurement</h2>
      </mat-card-title>
    </mat-card-header>
    <br />
    <from [formGroup]="form">
      <mat-form-field>
        <mat-label>Name</mat-label>
        <input
          matInput
          type="string"
          placeholder="Name"
          formControlName="Name"
          [formControl]="nameControl"
          required
        />
        <mat-error *ngIf="nameControl.invalid">{{
          getNameErrorMessage()
        }}</mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Target Current (A)</mat-label>
        <input
          matInput
          type="number"
          placeholder="1e-6"
          formControlName="Current"
          [formControl]="currentControl"
          required
        />
        <mat-error *ngIf="currentControl.invalid">{{
          getCurrentErrorMessage()
        }}</mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Speed/Resolution</mat-label>
        <mat-select matInput formCotrolName="Speed">
          <mat-option *ngFor="let speed of speeds" [value]="speed.value">
            {{ speed.viewValue }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Description</mat-label>
        <textarea
          cdkTextareaAutosize
          matInput
          placeholder="This is a measurement."
          formControlName="Description"
        ></textarea>
      </mat-form-field>
      <br />
      <p>Connections</p>
      <mat-form-field>
        <mat-label>Connection 1</mat-label>
        <input
          matInput
          type="number"
          formControlName="Con1"
          [errorStateMatcher]="errorMatcher"
          [formControl]="connection1Control"
          required
        />
        <mat-error *ngIf="form.hasError('conMatch1')"
          >Connection 1 cannot be the same as other connections!</mat-error
        >
        <mat-error *ngIf="connection1Control.invalid">{{
          getConnection1ErrorMessage()
        }}</mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Connection 2</mat-label>
        <input
          matInput
          type="number"
          formControlName="Con2"
          [errorStateMatcher]="errorMatcher"
          [formControl]="connection2Control"
          required
        />
        <mat-error *ngIf="connection2Control.invalid">{{
          getConnection2ErrorMessage()
        }}</mat-error>
        <mat-error *ngIf="form.hasError('conMatch2')"
          >Connection 2 cannot be the same as other connections!</mat-error
        >
      </mat-form-field>
      <mat-form-field>
        <mat-label>Connection 3</mat-label>
        <input
          matInput
          type="number"
          formControlName="Con3"
          [errorStateMatcher]="errorMatcher"
          [formControl]="connection3Control"
          required
        />
        <mat-error *ngIf="form.hasError('conMatch3')"
          >Connection 3 cannot be the same as other connections!</mat-error
        >
        <mat-error *ngIf="connection3Control.invalid">{{
          getConnection3ErrorMessage()
        }}</mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Connection 4</mat-label>
        <input
          matInput
          type="number"
          formControlName="Con4"
          [errorStateMatcher]="errorMatcher"
          [formControl]="connection4Control"
          required
        />
        <mat-error *ngIf="form.hasError('conMatch4')"
          >Connection 4 cannot be the same as other connections!</mat-error
        >
        <mat-error *ngIf="connection4Control.invalid">{{
          getConnection4ErrorMessage()
        }}</mat-error>
      </mat-form-field>
    </from>
  </mat-card-content>
  <img class="img-responsive" src="assets/connections.png" />

  <mat-card-actions>
    <button mat-raised-button color="warn" (click)="cancel()">
      Cancel
    </button>
    <button mat-raised-button color="primary" (click)="startMeasurement()">
      Start Measurement
    </button>
  </mat-card-actions>
</mat-card>
